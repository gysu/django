{% extends "base.html" %}
{% block title %}<title>P06 Form è¡¨å–®</title>{% endblock %}
{% block content%}
<div class="col-md-12">
  <form name="my form" action="/" method='GET'>
    ç¾åœ¨å¿ƒæƒ…:<br>
    {% for m in moods %}
      <div class="form-check-inline form-switch">
       <input  class="form-check-input " type="radio" name="mood" value="{{m.status}}">{{m.status}}
     </div>
    {% empty %}
      <p>ç©ºç©ºå¦‚ä¹Ÿ</p>
    {% endfor %}

    <div><label for="message">å¿ƒæƒ…ç•™è¨€æ¿:</label></div>
      <!-- Text input -->
    <div class="form-outline mb-4">
      <textarea class="form-control" name="user_post" id="form6Example7" rows="4"></textarea>
      <!-- <label class="form-label" for="form6Example7"></label> -->
    </div>
  

 
      <div class="row mb-2">
        <div class="col form-group">
          <label for="user_id">è¼¸å…¥æš±ç¨±</label>
          <input type="text" id="user_id" name="user_id"class="form-control" placeholder="æš±ç¨±">
        </div>
        <div class="col">
          <label for="user_pass">å¼µè²¼å¯†ç¢¼</label>
          <input type="text" id="user_pass" name="user_pass"class="form-control" placeholder="password">
        </div>
      </div>


      <input class ="btn btn-primary" type="submit" value="å¼µè²¼">
      <input class ="btn btn-danger" type="reset" value="é‡å¡«"> 
 
  </form>

  <div class="card bg-danger text-black text-center p-3 mt-3" >
    <blockquote class="blockquote mb-0">
      <footer class="blockquote-footer text-white">
        <small>
          ğŸ˜ <cite title="Source Title">ğŸ˜</cite>
        </small>
      </footer>
    </blockquote>
  </div>

  {% if message %}
  <div class="alert alert-success" role="alert">
    {{ message | linebreaks  }}
  </div>
  {% endif %}

</div>
  {% for p in posts %}
<div class="col col-md-4 g-3">

  <div class="card text">
    <div class="card-header d-flex">
      ã€{{ p.nickname }} ã€‘è¦ºå¾— ã€{{ p.mood }}ã€‘ 
      <!-- åˆªé™¤æ–‡ç«  é»xè·³å‡ºå½ˆçª— -->
      <div class ="ms-auto">
       <!-- é€™æ˜¯å¥—ç”¨js layerçš„å½ˆçª—ğŸ”¥ğŸ”¥ğŸ”¥ -->
        <button onclick="go_delete({{p.id}})" type="button" class="btn btn-outline-danger btn-sm "><i class="bi bi-x"></i></button>
      </div>

    </div>
      <small class = "text-end">
         <p class="card-text">
           <small class="text-muted">{{ p.pub_time}}</small>
          </p>
      </small>

    <div class="card-body ">
      <h5 class="card-title">ã€{{ p.nickname }} ã€‘è¦ºå¾— ã€{{ p.mood }}ã€‘</h5>
      <p class="card-text">{{ p.message }}</p>

      <div class = "text-end" > 
        <a href="#" class="btn btn-outline-primary btn-sm">read more..</a>
      </div>

    </div>
  </div>

</div> 


 {% endfor %}

<script>
   function go_delete(id) {
   
      // è°ƒç”¨layerå¼¹çª—ç»„ä»¶ è‡ªè¨‚
     layer.open({
            // å¼¹çª—æ ‡é¢˜
            title: "ç¢ºèªåˆªé™¤",
            // æ­£æ–‡
            content: "ç¢ºèªåˆªé™¤é€™ç¯‡æ–‡ç« å—?",
            // ç‚¹å‡»ç¡®å®šæŒ‰é’®åè°ƒç”¨çš„å›è°ƒå‡½æ•°
            btn: ['ç¢ºèª', 'å–æ¶ˆ'],
            // closeBtn: 0,
            yes: function( layero,index) {
                // æŒ‡å®šåº”å½“å‰å¾€çš„ url
                var user_pass = document.getElementById('user_pass').value; 
                if (user_pass != "") { 
                  //window.locationé é¢è·³è½‰
                  var usr = '/' + id + '/' + user_pass; 
                  window.location = usr; 
                  }
                else{                 
                  layer.msg ('è«‹å¡«åˆªé™¤å¯†ç¢¼',{time: 2000})
                                               //2såè‡ªåŠ¨å…³é—­
                  }
              },
        })
   }
</script>
{% endblock %}